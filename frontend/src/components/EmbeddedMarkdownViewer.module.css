/* 
 * Embedded Markdown Editor - CSS Module
 * This module isolates the MD editor from Tailwind CSS interference
 * and provides proper styling for embedded usage
 */

.editorContainer {
  /* Create a new stacking context and isolate from parent styles */
  isolation: isolate;
  contain: layout style;
  
  /* Reset any inherited styles that might interfere */
  all: initial;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  
  /* Establish the container dimensions */
  width: 100%;
  height: 100%;
  display: block;
  position: relative;
  
  /* Set up color mode variables */
  --color-fg-default: #24292f;
  --color-fg-muted: #656d76;
  --color-canvas-default: #ffffff;
  --color-canvas-subtle: #f6f8fa;
  --color-border-default: #d0d7de;
  --color-border-muted: #d8dee4;
  --color-accent-fg: #0969da;
  --color-success-fg: #1a7f37;
  --color-danger-fg: #cf222e;
  --color-neutral-muted: rgba(175, 184, 193, 0.2);
  --color-canvas-overlay: #ffffff;
  --color-shadow-small: rgba(31, 35, 40, 0.04);
  --color-shadow-medium: rgba(31, 35, 40, 0.15);
}

/* Dark mode variables */
.editorContainer[data-color-mode="dark"] {
  --color-fg-default: #f0f6fc;
  --color-fg-muted: #8b949e;
  --color-canvas-default: #0d1117;
  --color-canvas-subtle: #161b22;
  --color-border-default: #30363d;
  --color-border-muted: #21262d;
  --color-accent-fg: #58a6ff;
  --color-success-fg: #3fb950;
  --color-danger-fg: #f85149;
  --color-neutral-muted: rgba(110, 118, 129, 0.4);
  --color-canvas-overlay: #161b22;
  --color-shadow-small: rgba(1, 4, 9, 0.04);
  --color-shadow-medium: rgba(1, 4, 9, 0.15);
}

/* Force the MD editor to inherit proper styling */
.editorContainer :global(.w-md-editor) {
  background-color: var(--color-canvas-default) !important;
  color: var(--color-fg-default) !important;
  border: 1px solid var(--color-border-default) !important;
  border-radius: 6px !important;
  font-family: inherit !important;
  height: 100% !important;
  min-height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
}

/* Fix the main editor area */
.editorContainer :global(.w-md-editor-text-container) {
  background-color: var(--color-canvas-default) !important;
  color: var(--color-fg-default) !important;
  height: 100% !important;
  flex: 1 1 auto !important;
  overflow: auto !important;
}

/* Fix the textarea specifically */
.editorContainer :global(.w-md-editor-text-input) {
  background-color: var(--color-canvas-default) !important;
  color: var(--color-fg-default) !important;
  -webkit-text-fill-color: var(--color-fg-default) !important;
  font-family: 'SF Mono', Monaco, Inconsolata, 'Roboto Mono', 'Courier New', monospace !important;
  font-size: 14px !important;
  line-height: 1.5 !important;
  border: none !important;
  outline: none !important;
  resize: none !important;
  padding: 12px !important;
  margin: 0 !important;
  /* Override any Tailwind resets */
  box-sizing: border-box !important;
  /* Ensure text is visible */
  opacity: 1 !important;
  visibility: visible !important;
  height: auto !important;
  min-height: 100% !important; /* grows with content for better UX */
}

/* Fix the preview area */
.editorContainer :global(.w-md-editor-preview) {
  background-color: var(--color-canvas-default) !important;
  color: var(--color-fg-default) !important;
  padding: 12px !important;
  height: 100% !important;
  overflow: auto !important;
}

/* Fix the toolbar */
.editorContainer :global(.w-md-editor-toolbar) {
  background-color: var(--color-canvas-subtle) !important;
  border-bottom: 1px solid var(--color-border-default) !important;
}

.editorContainer :global(.w-md-editor-toolbar-child) {
  color: var(--color-fg-default) !important;
}

/* Fix toolbar buttons */
.editorContainer :global(.w-md-editor-toolbar button) {
  color: var(--color-fg-default) !important;
  background-color: transparent !important;
  border: none !important;
  padding: 4px 8px !important;
  margin: 0 2px !important;
  border-radius: 3px !important;
  cursor: pointer !important;
}

.editorContainer :global(.w-md-editor-toolbar button:hover) {
  background-color: var(--color-neutral-muted) !important;
}

/* Fix the markdown content rendering */
.editorContainer :global(.wmde-markdown) {
  background-color: var(--color-canvas-default) !important;
  color: var(--color-fg-default) !important;
}

.editorContainer :global(.wmde-markdown h1),
.editorContainer :global(.wmde-markdown h2),
.editorContainer :global(.wmde-markdown h3),
.editorContainer :global(.wmde-markdown h4),
.editorContainer :global(.wmde-markdown h5),
.editorContainer :global(.wmde-markdown h6) {
  color: var(--color-fg-default) !important;
  margin-top: 24px !important;
  margin-bottom: 16px !important;
  font-weight: 600 !important;
  line-height: 1.25 !important;
}

.editorContainer :global(.wmde-markdown p) {
  color: var(--color-fg-default) !important;
  margin-top: 0 !important;
  margin-bottom: 16px !important;
  line-height: 1.6 !important;
}

.editorContainer :global(.wmde-markdown code) {
  background-color: var(--color-neutral-muted) !important;
  color: var(--color-fg-default) !important;
  padding: 2px 4px !important;
  border-radius: 3px !important;
  font-family: 'SF Mono', Monaco, Inconsolata, 'Roboto Mono', 'Courier New', monospace !important;
  font-size: 85% !important;
}

.editorContainer :global(.wmde-markdown pre) {
  background-color: var(--color-canvas-subtle) !important;
  color: var(--color-fg-default) !important;
  padding: 16px !important;
  border-radius: 6px !important;
  overflow: auto !important;
  font-family: 'SF Mono', Monaco, Inconsolata, 'Roboto Mono', 'Courier New', monospace !important;
  font-size: 85% !important;
  line-height: 1.5 !important;
}

.editorContainer :global(.wmde-markdown blockquote) {
  color: var(--color-fg-muted) !important;
  border-left: 4px solid var(--color-border-default) !important;
  padding-left: 16px !important;
  margin-left: 0 !important;
}

.editorContainer :global(.wmde-markdown ul),
.editorContainer :global(.wmde-markdown ol) {
  color: var(--color-fg-default) !important;
  margin-top: 0 !important;
  margin-bottom: 16px !important;
  padding-left: 2em !important;
}

.editorContainer :global(.wmde-markdown table) {
  border-collapse: collapse !important;
  border-spacing: 0 !important;
  width: 100% !important;
  margin-top: 0 !important;
  margin-bottom: 16px !important;
}

.editorContainer :global(.wmde-markdown table th),
.editorContainer :global(.wmde-markdown table td) {
  padding: 6px 13px !important;
  border: 1px solid var(--color-border-default) !important;
  color: var(--color-fg-default) !important;
}

.editorContainer :global(.wmde-markdown table th) {
  background-color: var(--color-canvas-subtle) !important;
  font-weight: 600 !important;
}

/* Fix any remaining text invisibility issues */
.editorContainer :global(*) {
  box-sizing: border-box !important;
}

/* Ensure the container adapts to its parent's dimensions */
.editorContainer :global(.w-md-editor.w-md-editor-focus) {
  height: 100% !important;
  min-height: 100% !important;
}

/* Override any conflicting global styles */
.editorContainer :global(.w-md-editor *) {
  box-sizing: border-box !important;
}

/* Specific fix for the text area overlay issue */
.editorContainer :global(.w-md-editor-text-container .w-md-editor-text-input) {
  /* Ensure the textarea is always visible and properly styled */
  position: relative !important;
  z-index: 1 !important;
  background: transparent !important;
  color: var(--color-fg-default) !important;
  -webkit-text-fill-color: var(--color-fg-default) !important;
  text-shadow: none !important;
  /* Remove any transforms that might hide the text */
  transform: none !important;
  /* Ensure proper sizing */
  width: 100% !important;
  height: 100% !important;
  min-height: 200px !important;
}

/* Fix the preview-only mode */
.previewOnly {
  background-color: var(--color-canvas-default) !important;
  color: var(--color-fg-default) !important;
  padding: 12px !important;
  height: 100% !important;
  overflow: auto !important;
}

/* --- Scrolling Fix -------------------------------------------------- */
.editorContainer :global(.w-md-editor-text) {
  flex: 1 1 auto !important;
  overflow: auto !important;
  height: 100% !important;
} 